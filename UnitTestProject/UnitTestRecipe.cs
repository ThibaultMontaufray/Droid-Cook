using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Net;
using System.IO;
using Droid_Cook.Model;
using System.Collections.Generic;

namespace UnitTestProject
{
    [TestClass]
    public class UnitTestRecipe : BaseTestApi
    {
        [TestMethod]
        public void TestGetRecipe()
        {
            try
            {
                //string response = JsonGetAuth(string.Format("{0}recipes/{1}/information", DESTINATION, "296687"));
                string response = "{\"vegetarian\":false,\"vegan\":false,\"glutenFree\":false,\"dairyFree\":false,\"veryHealthy\":false,\"cheap\":false,\"veryPopular\":false,\"sustainable\":false,\"weightWatcherSmartPoints\":18,\"gaps\":\"no\",\"lowFodmap\":false,\"ketogenic\":false,\"whole30\":false,\"servings\":4,\"preparationMinutes\":15,\"cookingMinutes\":15,\"sourceUrl\":\"http://www.foodnetwork.com/recipes/mario-batali/chicken-saltimbocca-saltimbocca-di-pollo-recipe.html\",\"spoonacularSourceUrl\":\"https://spoonacular.com/chicken-296687\",\"aggregateLikes\":2,\"spoonacularScore\":73.0,\"healthScore\":28.0,\"creditText\":\"Foodnetwork\",\"sourceName\":\"Foodnetwork\",\"pricePerServing\":572.83,\"extendedIngredients\":[{\"id\":20081,\"aisle\":\"Baking\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/flour.png\",\"consistency\":\"solid\",\"name\":\"all purpose flour\",\"amount\":1.0,\"unit\":\"cup\",\"unitShort\":\"cup\",\"unitLong\":\"cup\",\"originalString\":\"1 cup all purpose flour\",\"metaInformation\":[]},{\"id\":1001,\"aisle\":\"Milk, Eggs, Other Dairy\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg\",\"consistency\":\"solid\",\"name\":\"butter\",\"amount\":2.0,\"unit\":\"tablespoons\",\"unitShort\":\"Tbsp\",\"unitLong\":\"tablespoons\",\"originalString\":\"2 tablespoons butter\",\"metaInformation\":[]},{\"id\":5062,\"aisle\":\"Meat\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/chicken-breasts.jpg\",\"consistency\":\"solid\",\"name\":\"chicken breasts\",\"amount\":32.0,\"unit\":\"ounce\",\"unitShort\":\"oz\",\"unitLong\":\"ounces\",\"originalString\":\"4 (8-ounce) chicken breasts\",\"metaInformation\":[]},{\"id\":6172,\"aisle\":\"Canned and Jarred\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/broth.jpg\",\"consistency\":\"liquid\",\"name\":\"chicken stock\",\"amount\":0.5,\"unit\":\"cup\",\"unitShort\":\"cup\",\"unitLong\":\"cups\",\"originalString\":\"1/2 cup chicken stock\",\"metaInformation\":[]},{\"id\":14057,\"aisle\":\"Alcoholic Beverages\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/red-wine.jpg\",\"consistency\":\"liquid\",\"name\":\"marsala wine\",\"amount\":1.0,\"unit\":\"cup\",\"unitShort\":\"cup\",\"unitLong\":\"cup\",\"originalString\":\"1 cup Marsala wine\",\"metaInformation\":[]},{\"id\":4053,\"aisle\":\"Oil, Vinegar, Salad Dressing\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/olive-oil.jpg\",\"consistency\":\"liquid\",\"name\":\"olive oil\",\"amount\":2.0,\"unit\":\"cups\",\"unitShort\":\"cup\",\"unitLong\":\"cups\",\"originalString\":\"2 cups plus 4 tablespoons extra-virgin olive oil\",\"metaInformation\":[\"extra-virgin\"]},{\"id\":11987,\"aisle\":\"Produce\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/oyster-mushrooms.jpg\",\"consistency\":\"solid\",\"name\":\"oyster mushrooms\",\"amount\":0.5,\"unit\":\"pound\",\"unitShort\":\"lb\",\"unitLong\":\"pounds\",\"originalString\":\"1/2 pound oyster mushrooms, sliced into 1/4-inch pieces\",\"metaInformation\":[\"sliced into 1/4-inch pieces\"]},{\"id\":11297,\"aisle\":\"Produce\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/parsley.jpg\",\"consistency\":\"solid\",\"name\":\"parsley\",\"amount\":1.0,\"unit\":\"bunch\",\"unitShort\":\"bunch\",\"unitLong\":\"bunch\",\"originalString\":\"1 bunch Italian parsley, chopped to yield 1/4 cup\",\"metaInformation\":[\"italian\",\"chopped\"]},{\"id\":10010123,\"aisle\":\"Meat\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/proscuitto.jpg\",\"consistency\":\"solid\",\"name\":\"prosciutto\",\"amount\":4.0,\"unit\":\"slices\",\"unitShort\":\"slices\",\"unitLong\":\"slices\",\"originalString\":\"4 large slices prosciutto\",\"metaInformation\":[\"large\"]},{\"id\":2038,\"aisle\":\"Spices and Seasonings\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/sage.jpg\",\"consistency\":\"solid\",\"name\":\"sage leaves\",\"amount\":4.0,\"unit\":\"\",\"unitShort\":\"\",\"unitLong\":\"\",\"originalString\":\"4 large sage leaves, plus 20 smaller leaves\",\"metaInformation\":[\"large\"]},{\"id\":1102047,\"aisle\":\"Spices and Seasonings\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/salt-and-pepper.jpg\",\"consistency\":\"solid\",\"name\":\"salt and pepper\",\"amount\":4.0,\"unit\":\"servings\",\"unitShort\":\"servings\",\"unitLong\":\"servings\",\"originalString\":\"Salt and pepper\",\"metaInformation\":[]},{\"id\":11677,\"aisle\":\"Produce\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/shallots.jpg\",\"consistency\":\"solid\",\"name\":\"shallots\",\"amount\":4.0,\"unit\":\"\",\"unitShort\":\"\",\"unitLong\":\"\",\"originalString\":\"4 shallots, thinly sliced\",\"metaInformation\":[\"thinly sliced\"]}],\"id\":296687,\"title\":\"Chicken\",\"readyInMinutes\":30,\"image\":\"https://spoonacular.com/recipeImages/296687-556x370.jpeg\",\"imageType\":\"jpeg\",\"cuisines\":[],\"dishTypes\":[\"lunch\",\"main course\",\"main dish\",\"dinner\"],\"diets\":[],\"occasions\":[],\"winePairing\":{\"pairedWines\":[\"chardonnay\",\"pinot noir\",\"sauvignon blanc\"],\"pairingText\":\"Chicken works really well with Chardonnay, Pinot Noir, and Sauvignon Blanc. White meat is typically paired with white wine as to not overpower the flavor of the meat, so chardonnay and sauvignon blanc are safe choices. Chicken prepared with a tomato sauce or certainly a red wine sauce can and should be served with a red like a pinot noir. The Waterbrook Reserve Chardonnay with a 5 out of 5 star rating seems like a good match. It costs about 20 dollars per bottle.\",\"productMatches\":[{\"id\":428827,\"title\":\"Waterbrook Reserve Chardonnay\",\"description\":\"Beautiful and golden in color, this chardonnay has persistent ripe pear and lychee flavors that are complemented by a subtle, sweet toasty oak. Very balanced acid harmonizes the thick viscosity of this ripe and decadent wine.\",\"price\":\"$19.99\",\"imageUrl\":\"https://spoonacular.com/productImages/428827-312x231.jpg\",\"averageRating\":1.0,\"ratingCount\":1.0,\"score\":0.75,\"link\":\"https://www.amazon.com/Waterbrook-Reserve-Chardonnay-Columbia-Valley/dp/B01B6QW4IM?tag=spoonacular-20\"}]},\"instructions\":\"Season the flour with salt and pepper.                          With a meat mallet, pound the chicken breasts to 1/4-inch thickness. Season each breast with salt and pepper and lay 1 sage leaf on each breast. Lay 1 slice prosciutto over each piece and fold in half like a book. Secure the two sides with a toothpick and dredge each breast in the seasoned flour.                          In a heavy-bottomed pot with high sides, heat the 2 cups olive oil to 375 degrees. Make sure that you have a slotted spoon or spider close by. Working in a few batches, fry the leaves in the oil, removing with the slotted spoon after 30 seconds. Season with salt, set on a plate lined with paper towels to drain, and set aside.                          In a 12 to 14-inch saute pan, heat the remaining olive oil until smoking. Add the chicken and saute until golden brown on both sides. Add the shallots and mushrooms and cook until the mushrooms have sweated, about 5 to 6 minutes. Add the Marsala and chicken stock and cook over high heat until reduce by half. Swirl the butter into the pan, add the parsley and serve on 4 warmed dinner plates, topped with the fried sage leaves.\",\"analyzedInstructions\":[{\"name\":\"\",\"steps\":[{\"number\":1,\"step\":\"Season the flour with salt and pepper.\",\"ingredients\":[{\"id\":1102047,\"name\":\"salt and pepper\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/salt-and-pepper.jpg\"},{\"id\":20081,\"name\":\"all purpose flour\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/flour.png\"}],\"equipment\":[]},{\"number\":2,\"step\":\"With a meat mallet, pound the chicken breasts to 1/4-inch thickness. Season each breast with salt and pepper and lay 1 sage leaf on each breast. Lay 1 slice prosciutto over each piece and fold in half like a book. Secure the two sides with a toothpick and dredge each breast in the seasoned flour.\",\"ingredients\":[{\"id\":5062,\"name\":\"chicken breast\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/chicken-breasts.jpg\"},{\"id\":1102047,\"name\":\"salt and pepper\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/salt-and-pepper.jpg\"},{\"id\":10010123,\"name\":\"prosciutto\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/proscuitto.jpg\"},{\"id\":1065062,\"name\":\"meat\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/whole-chicken.jpg\"},{\"id\":2038,\"name\":\"sage\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/sage.jpg\"}],\"equipment\":[{\"id\":3846,\"name\":\"meat tenderizer\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/meat-mallet.jpg\"},{\"id\":404644,\"name\":\"toothpicks\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/toothpicks.jpg\"}]},{\"number\":3,\"step\":\"In a heavy-bottomed pot with high sides, heat the 2 cups olive oil to 375 degrees. Make sure that you have a slotted spoon or spider close by. Working in a few batches, fry the leaves in the oil, removing with the slotted spoon after 30 seconds. Season with salt, set on a plate lined with paper towels to drain, and set aside.\",\"ingredients\":[{\"id\":4053,\"name\":\"olive oil\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/olive-oil.jpg\"},{\"id\":2047,\"name\":\"salt\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/salt.jpg\"}],\"equipment\":[{\"id\":404636,\"name\":\"slotted spoon\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/slotted-spoon.jpg\"},{\"id\":405895,\"name\":\"paper towels\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/paper-towels.jpg\"},{\"id\":404752,\"name\":\"pot\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/stock-pot.jpg\"}]},{\"number\":4,\"step\":\"In a 12 to 14-inch saute pan, heat the remaining olive oil until smoking.\",\"ingredients\":[{\"id\":4053,\"name\":\"olive oil\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/olive-oil.jpg\"}],\"equipment\":[{\"id\":404645,\"name\":\"frying pan\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/pan.png\"}]},{\"number\":5,\"step\":\"Add the chicken and saute until golden brown on both sides.\",\"ingredients\":[],\"equipment\":[]},{\"number\":6,\"step\":\"Add the shallots and mushrooms and cook until the mushrooms have sweated, about 5 to 6 minutes.\",\"ingredients\":[{\"id\":11677,\"name\":\"shallot\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/shallots.jpg\"}],\"equipment\":[],\"length\":{\"number\":5,\"unit\":\"minutes\"}},{\"number\":7,\"step\":\"Add the Marsala and chicken stock and cook over high heat until reduce by half. Swirl the butter into the pan, add the parsley and serve on 4 warmed dinner plates, topped with the fried sage leaves.\",\"ingredients\":[{\"id\":6172,\"name\":\"chicken stock\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/broth.jpg\"},{\"id\":2038,\"name\":\"sage\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/sage.jpg\"},{\"id\":14057,\"name\":\"marsala\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/red-wine.jpg\"},{\"id\":11297,\"name\":\"parsley\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/parsley.jpg\"},{\"id\":1001,\"name\":\"butter\",\"image\":\"https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg\"}],\"equipment\":[{\"id\":404645,\"name\":\"frying pan\",\"image\":\"https://spoonacular.com/cdn/equipment_100x100/pan.png\"}]}]}]}";
                var result = Deserialize<Recipe>(response);
            }
            catch (Exception exp)
            {
                Assert.Fail(exp.Message);
            }
        }
    }
}
